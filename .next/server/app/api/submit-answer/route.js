"use strict";(()=>{var e={};e.id=760,e.ids=[760],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3685:e=>{e.exports=require("http")},5687:e=>{e.exports=require("https")},5477:e=>{e.exports=require("punycode")},2781:e=>{e.exports=require("stream")},7310:e=>{e.exports=require("url")},9796:e=>{e.exports=require("zlib")},14:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>f,originalPathname:()=>x,patchFetch:()=>g,requestAsyncStorage:()=>h,routeModule:()=>d,serverHooks:()=>b,staticGenerationAsyncStorage:()=>w,staticGenerationBailout:()=>I});var s={};t.r(s),t.d(s,{POST:()=>m});var i=t(5419),o=t(9108),a=t(9678),n=t(8070),u=t(2964),p=t(973);let c=(0,u.eI)("https://fwqgpzfxywhpurfszefr.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ3cWdwemZ4eXdocHVyZnN6ZWZyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk2MTgxNDYsImV4cCI6MjA3NTE5NDE0Nn0.b3-o9Wv1vY4EiLF1HTaWZ8jJ9jLq10nDkM2DyuOJaBk"),l=new p.$D(process.env.GOOGLE_API_KEY);async function m(e){try{let{sessionId:r,userAnswer:t}=await e.json(),{data:s}=await c.from("math_problem_sessions").select("*").eq("id",r).single();if(!s)throw Error("Session not found");let i=Number(t)===Number(s.final_answer),o=l.getGenerativeModel({model:"gemini-2.5-flash"}),a=`
      The user solved this math problem:
      Problem: ${s.problem_text}
      Correct Answer: ${s.final_answer}
      User Answer: ${t}

      Provide short feedback (1â€“2 sentences).
      If correct, praise them; if incorrect, gently explain why.
    `,u=(await o.generateContent(a)).response.text(),{data:p,error:m}=await c.from("math_problem_submissions").insert({session_id:r,user_answer:t,is_correct:i,feedback:u}).select().single();if(m)throw m;return n.Z.json({feedback:u,isCorrect:i})}catch(e){return console.error(e),n.Z.json({error:"Submission failed"},{status:500})}}let d=new i.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/submit-answer/route",pathname:"/api/submit-answer",filename:"route",bundlePath:"app/api/submit-answer/route"},resolvedPagePath:"C:\\Users\\badrulamin\\OneDrive\\Desktop\\ottodot\\ottodot-coding-task-full-stack\\app\\api\\submit-answer\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:h,staticGenerationAsyncStorage:w,serverHooks:b,headerHooks:f,staticGenerationBailout:I}=d,x="/api/submit-answer/route";function g(){return(0,a.patchFetch)({serverHooks:b,staticGenerationAsyncStorage:w})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[638,709],()=>t(14));module.exports=s})();